
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ESP-AT and Wio RP2040 ESP-AT Words &#8212; zeptoforth  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Neopixels on the RP2040" href="neopixel.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="esp-at-and-wio-rp2040-esp-at-words">
<h1>ESP-AT and Wio RP2040 ESP-AT Words<a class="headerlink" href="#esp-at-and-wio-rp2040-esp-at-words" title="Permalink to this heading">¶</a></h1>
<p>zeptoforth has optional support for the SPI ESP-AT protocol for communicating with the ESP8285 WiFi radio on the Wio RP2040 board. This includes supporting outgoing TCP connections and starting a TCP server. It currently does not support UDP, but this may come in the future.</p>
<section id="esp-at">
<h2><code class="docutils literal notranslate"><span class="pre">esp-at</span></code><a class="headerlink" href="#esp-at" title="Permalink to this heading">¶</a></h2>
<p>The ESP-AT module is defined in <code class="docutils literal notranslate"><span class="pre">extra/common/esp_at,fs</span></code> and defines the ESP-AT API for interfacing with ESP-AT devices such as the ESP8285 WiFi radio on the Wio RP2040 board.</p>
<section id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this heading">¶</a></h3>
<section id="x-esp-at-not-owned">
<h4><code class="docutils literal notranslate"><span class="pre">x-esp-at-not-owned</span></code><a class="headerlink" href="#x-esp-at-not-owned" title="Permalink to this heading">¶</a></h4>
<p>( – )</p>
<p>ESP-AT device not owned exception</p>
</section>
<section id="x-esp-at-timeout">
<h4><code class="docutils literal notranslate"><span class="pre">x-esp-at-timeout</span></code><a class="headerlink" href="#x-esp-at-timeout" title="Permalink to this heading">¶</a></h4>
<p>( – )</p>
<p>ESP-AT timeout exception</p>
</section>
<section id="x-esp-at-not-ready">
<h4><code class="docutils literal notranslate"><span class="pre">x-esp-at-not-ready</span></code><a class="headerlink" href="#x-esp-at-not-ready" title="Permalink to this heading">¶</a></h4>
<p>( – )</p>
<p>ESP-AT device is not ready exception</p>
</section>
<section id="x-esp-at-error">
<h4><code class="docutils literal notranslate"><span class="pre">x-esp-at-error</span></code><a class="headerlink" href="#x-esp-at-error" title="Permalink to this heading">¶</a></h4>
<p>( – )</p>
<p>General ESP-AT error exception</p>
</section>
<section id="x-out-of-range-value">
<h4><code class="docutils literal notranslate"><span class="pre">x-out-of-range-value</span></code><a class="headerlink" href="#x-out-of-range-value" title="Permalink to this heading">¶</a></h4>
<p>( – )</p>
<p>Out of range value exception</p>
</section>
</section>
<section id="connection-types">
<h3>Connection types<a class="headerlink" href="#connection-types" title="Permalink to this heading">¶</a></h3>
<section id="no-connect">
<h4><code class="docutils literal notranslate"><span class="pre">no-connect</span></code><a class="headerlink" href="#no-connect" title="Permalink to this heading">¶</a></h4>
<p>No connection</p>
</section>
<section id="tcp">
<h4><code class="docutils literal notranslate"><span class="pre">tcp</span></code><a class="headerlink" href="#tcp" title="Permalink to this heading">¶</a></h4>
<p>IPv4 TCP connection</p>
</section>
<section id="tcpv6">
<h4><code class="docutils literal notranslate"><span class="pre">tcpv6</span></code><a class="headerlink" href="#tcpv6" title="Permalink to this heading">¶</a></h4>
<p>IPv6 TCP connection</p>
</section>
<section id="udp">
<h4><code class="docutils literal notranslate"><span class="pre">udp</span></code><a class="headerlink" href="#udp" title="Permalink to this heading">¶</a></h4>
<p>IPv4 UDP non-connection</p>
</section>
<section id="udpv6">
<h4><code class="docutils literal notranslate"><span class="pre">udpv6</span></code><a class="headerlink" href="#udpv6" title="Permalink to this heading">¶</a></h4>
<p>IPv6 UDP non-connection</p>
</section>
<section id="ssl">
<h4><code class="docutils literal notranslate"><span class="pre">ssl</span></code><a class="headerlink" href="#ssl" title="Permalink to this heading">¶</a></h4>
<p>IPv4 TLS connection</p>
</section>
<section id="sslv6">
<h4><code class="docutils literal notranslate"><span class="pre">sslv6</span></code><a class="headerlink" href="#sslv6" title="Permalink to this heading">¶</a></h4>
<p>IPv6 TLS connection</p>
</section>
</section>
<section id="connection-server-client-types">
<h3>Connection server/client types<a class="headerlink" href="#connection-server-client-types" title="Permalink to this heading">¶</a></h3>
<section id="client">
<h4><code class="docutils literal notranslate"><span class="pre">client</span></code><a class="headerlink" href="#client" title="Permalink to this heading">¶</a></h4>
<p>ESP-AT device initiated connection</p>
</section>
<section id="server">
<h4><code class="docutils literal notranslate"><span class="pre">server</span></code><a class="headerlink" href="#server" title="Permalink to this heading">¶</a></h4>
<p>ESP-AT device received connection</p>
</section>
</section>
<section id="station-interface-statuses">
<h3>Station interface statuses<a class="headerlink" href="#station-interface-statuses" title="Permalink to this heading">¶</a></h3>
<section id="station-not-inited">
<h4><code class="docutils literal notranslate"><span class="pre">station-not-inited</span></code><a class="headerlink" href="#station-not-inited" title="Permalink to this heading">¶</a></h4>
<p>WiFi station is not initialized</p>
</section>
<section id="station-not-connected">
<h4><code class="docutils literal notranslate"><span class="pre">station-not-connected</span></code><a class="headerlink" href="#station-not-connected" title="Permalink to this heading">¶</a></h4>
<p>WiFi station is not connected</p>
</section>
<section id="station-connected">
<h4><code class="docutils literal notranslate"><span class="pre">station-connected</span></code><a class="headerlink" href="#station-connected" title="Permalink to this heading">¶</a></h4>
<p>WiFi station is connected</p>
</section>
<section id="station-active">
<h4><code class="docutils literal notranslate"><span class="pre">station-active</span></code><a class="headerlink" href="#station-active" title="Permalink to this heading">¶</a></h4>
<p>WiFi station is active</p>
</section>
<section id="station-disconnected">
<h4><code class="docutils literal notranslate"><span class="pre">station-disconnected</span></code><a class="headerlink" href="#station-disconnected" title="Permalink to this heading">¶</a></h4>
<p>WiFi station is disconnected</p>
</section>
<section id="station-attempted-wifi">
<h4><code class="docutils literal notranslate"><span class="pre">station-attempted-wifi</span></code><a class="headerlink" href="#station-attempted-wifi" title="Permalink to this heading">¶</a></h4>
<p>WiFi station attempted connection unsuccessfully</p>
</section>
</section>
<section id="domain-name-resolution-preferences">
<h3>Domain name resolution preferences<a class="headerlink" href="#domain-name-resolution-preferences" title="Permalink to this heading">¶</a></h3>
<section id="prefer-resolve-ipv4">
<h4><code class="docutils literal notranslate"><span class="pre">prefer-resolve-ipv4</span></code><a class="headerlink" href="#prefer-resolve-ipv4" title="Permalink to this heading">¶</a></h4>
<p>Prefer IPv4 addresses when resolving hostname addresses</p>
</section>
<section id="resolve-ipv4-only">
<h4><code class="docutils literal notranslate"><span class="pre">resolve-ipv4-only</span></code><a class="headerlink" href="#resolve-ipv4-only" title="Permalink to this heading">¶</a></h4>
<p>Resolve IPv4 addresses only</p>
</section>
<section id="resolve-ipv6-only">
<h4><code class="docutils literal notranslate"><span class="pre">resolve-ipv6-only</span></code><a class="headerlink" href="#resolve-ipv6-only" title="Permalink to this heading">¶</a></h4>
<p>Resolve IPv6 addresses only</p>
</section>
</section>
<section id="wifi-modes">
<h3>WiFi modes<a class="headerlink" href="#wifi-modes" title="Permalink to this heading">¶</a></h3>
<section id="null-mode">
<h4><code class="docutils literal notranslate"><span class="pre">null-mode</span></code><a class="headerlink" href="#null-mode" title="Permalink to this heading">¶</a></h4>
<p>No WiFi mode</p>
</section>
<section id="station-mode">
<h4><code class="docutils literal notranslate"><span class="pre">station-mode</span></code><a class="headerlink" href="#station-mode" title="Permalink to this heading">¶</a></h4>
<p>WiFi station mode</p>
</section>
<section id="softap-mode">
<h4><code class="docutils literal notranslate"><span class="pre">softap-mode</span></code><a class="headerlink" href="#softap-mode" title="Permalink to this heading">¶</a></h4>
<p>WiFi softAP mode</p>
</section>
<section id="softap-station-mode">
<h4><code class="docutils literal notranslate"><span class="pre">softap-station-mode</span></code><a class="headerlink" href="#softap-station-mode" title="Permalink to this heading">¶</a></h4>
<p>WiFi softAP/station mode</p>
</section>
</section>
<section id="auto-connect-settings">
<h3>Auto-connect settings<a class="headerlink" href="#auto-connect-settings" title="Permalink to this heading">¶</a></h3>
<section id="not-auto-connect">
<h4><code class="docutils literal notranslate"><span class="pre">not-auto-connect</span></code><a class="headerlink" href="#not-auto-connect" title="Permalink to this heading">¶</a></h4>
<p>Do not auto-connect</p>
</section>
<section id="auto-connect">
<h4><code class="docutils literal notranslate"><span class="pre">auto-connect</span></code><a class="headerlink" href="#auto-connect" title="Permalink to this heading">¶</a></h4>
<p>Auto-connect</p>
</section>
</section>
<section id="sleep-modes">
<h3>Sleep modes<a class="headerlink" href="#sleep-modes" title="Permalink to this heading">¶</a></h3>
<section id="disable-sleep-mode">
<h4><code class="docutils literal notranslate"><span class="pre">disable-sleep-mode</span></code><a class="headerlink" href="#disable-sleep-mode" title="Permalink to this heading">¶</a></h4>
<p>Disable sleep mode</p>
</section>
<section id="modem-sleep-dtim-mode">
<h4><code class="docutils literal notranslate"><span class="pre">modem-sleep-dtim-mode</span></code><a class="headerlink" href="#modem-sleep-dtim-mode" title="Permalink to this heading">¶</a></h4>
<p>Modem sleep DTIM mode</p>
</section>
<section id="light-sleep-mode">
<h4><code class="docutils literal notranslate"><span class="pre">light-sleep-mode</span></code><a class="headerlink" href="#light-sleep-mode" title="Permalink to this heading">¶</a></h4>
<p>Light sleep mode</p>
</section>
<section id="modem-sleep-listen-interval-mode">
<h4><code class="docutils literal notranslate"><span class="pre">modem-sleep-listen-interval-mode</span></code><a class="headerlink" href="#modem-sleep-listen-interval-mode" title="Permalink to this heading">¶</a></h4>
<p>Modem interval listen sleep mode</p>
</section>
</section>
<section id="close-all-setting">
<h3>Close-all setting<a class="headerlink" href="#close-all-setting" title="Permalink to this heading">¶</a></h3>
<section id="not-close-all">
<h4><code class="docutils literal notranslate"><span class="pre">not-close-all</span></code><a class="headerlink" href="#not-close-all" title="Permalink to this heading">¶</a></h4>
<p>Do not close existing connections on closing a server</p>
</section>
<section id="close-all">
<h4><code class="docutils literal notranslate"><span class="pre">close-all</span></code><a class="headerlink" href="#close-all" title="Permalink to this heading">¶</a></h4>
<p>Close existing connections on closing a server</p>
</section>
</section>
<section id="id1">
<h3><code class="docutils literal notranslate"><span class="pre">&lt;esp-at&gt;</span></code><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;esp-at&gt;</span></code> class implements the core of the zeptoforth ESP-AT API.</p>
<p>It has the following constructor:</p>
<section id="new">
<h4><code class="docutils literal notranslate"><span class="pre">new</span></code><a class="headerlink" href="#new" title="Permalink to this heading">¶</a></h4>
<p>( interface self – )</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;esp-at&gt;</span></code> constructor takes an instance of <code class="docutils literal notranslate"><span class="pre">&lt;wio-esp-at-spi&gt;</span></code> when it is initialized.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;esp-at&gt;</span></code> class has the following methods:</p>
</section>
<section id="claim-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">claim-esp-at</span></code><a class="headerlink" href="#claim-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Claim the ESP-AT device. All other attempts to claim the ESP-AT device will block until the ESP-AT device is released.</p>
</section>
<section id="release-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">release-esp-at</span></code><a class="headerlink" href="#release-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Release the ESP-AT device. The next task blocked on the ESP-AT device, if there is any, will then claim it.</p>
</section>
<section id="with-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">with-esp-at</span></code><a class="headerlink" href="#with-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( xt self – ) ( xt: device – )</p>
<p>Execute code with an ESP-AT device, claiming it beforehand and releasing it afterwards. The ESP-AT device will also be released if an exception occurs, which will be re-raised afterwards.</p>
</section>
<section id="with-esp-at-timeout">
<h4><code class="docutils literal notranslate"><span class="pre">with-esp-at-timeout</span></code><a class="headerlink" href="#with-esp-at-timeout" title="Permalink to this heading">¶</a></h4>
<p>( xt timeout self – ) ( xt: – )</p>
<p>Execute code with a set timeout. The timeout will be restored afterwards, including if an exception ocurs, which will be re-raised?</p>
</section>
<section id="catch-with-esp-at-timeout">
<h4><code class="docutils literal notranslate"><span class="pre">catch-with-esp-at-timeout</span></code><a class="headerlink" href="#catch-with-esp-at-timeout" title="Permalink to this heading">¶</a></h4>
<p>( xt timeout self – timed-out? ) ( xt: – )</p>
<p>Execute code with a set timeout and return whether that timeout has been reached. The timeout will be restored afterwards, including if an exception ocurs, which will be re-raised?</p>
</section>
<section id="esp-at-recv-xt">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-recv-xt!</span></code><a class="headerlink" href="#esp-at-recv-xt" title="Permalink to this heading">¶</a></h4>
<p>( xt self – ) ( xt: c-addr bytes mux – )</p>
<p>Set ESP-AT frame receive callback.</p>
<p><em>mux</em> is the ID from 0 to 4 of the connection in question, or -1 if the ESP-AT device is in single connection mode.</p>
</section>
<section id="esp-at-timeout">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-timeout!</span></code><a class="headerlink" href="#esp-at-timeout" title="Permalink to this heading">¶</a></h4>
<p>( timeout self – )</p>
<p>Set the ESP-AT device timeout in ticks.</p>
</section>
<section id="id2">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-timeout&#64;</span></code><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<p>( self – timeout )</p>
<p>Get the ESP-AT device timeout in ticks.</p>
</section>
<section id="esp-at-delay">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-delay!</span></code><a class="headerlink" href="#esp-at-delay" title="Permalink to this heading">¶</a></h4>
<p>( delay self – )</p>
<p>Set the ESP-AT delay in microseconds.</p>
</section>
<section id="id3">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-delay&#64;</span></code><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<p>( self – delay )</p>
<p>Get the ESP-AT delay in microseconds.</p>
</section>
<section id="esp-at-long-delay">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-long-delay!</span></code><a class="headerlink" href="#esp-at-long-delay" title="Permalink to this heading">¶</a></h4>
<p>( delay self – )</p>
<p>Set the ESP-AT long delay in microseconds.</p>
</section>
<section id="id4">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-long-delay&#64;</span></code><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<p>( self – delay )</p>
<p>Get the ESP-AT long delay in microseconds.</p>
</section>
<section id="esp-at-multi">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-multi!</span></code><a class="headerlink" href="#esp-at-multi" title="Permalink to this heading">¶</a></h4>
<p>( multi? self – )</p>
<p>Enable/disable multiple connections.</p>
</section>
<section id="id5">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-multi&#64;</span></code><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<p>( self – multi? )</p>
<p>Get multiple connections enabled/disabled.</p>
</section>
<section id="esp-at-ipv6">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ipv6!</span></code><a class="headerlink" href="#esp-at-ipv6" title="Permalink to this heading">¶</a></h4>
<p>( ipv6? self – )</p>
<p>Enable/disable IPv6 mode.</p>
</section>
<section id="id6">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ipv6&#64;</span></code><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<p>( self – ipv6? )</p>
<p>Get IPv6 mode enabled/disabled.</p>
</section>
<section id="esp-at-sleep">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-sleep!</span></code><a class="headerlink" href="#esp-at-sleep" title="Permalink to this heading">¶</a></h4>
<p>( sleep-mode self – )</p>
<p>Set the sleep mode.</p>
</section>
<section id="id7">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-sleep&#64;</span></code><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<p>( self – sleep-mode )</p>
<p>Get the sleep mode.</p>
</section>
<section id="esp-at-status">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status&#64;</span></code><a class="headerlink" href="#esp-at-status" title="Permalink to this heading">¶</a></h4>
<p>( status self – )</p>
<p>Get the connection state.</p>
<p><em>status</em> is an instance of the <code class="docutils literal notranslate"><span class="pre">&lt;esp-at-status&gt;</span></code> class that will be populated by this method.</p>
</section>
<section id="esp-at-wifi-power">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-wifi-power!</span></code><a class="headerlink" href="#esp-at-wifi-power" title="Permalink to this heading">¶</a></h4>
<p>( power self – )</p>
<p>Set the WiFi power.</p>
</section>
<section id="id8">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-wifi-power&#64;</span></code><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<p>( self – power )</p>
<p>Get the WiFi power.</p>
</section>
<section id="esp-at-wifi-mode">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-wifi-mode!</span></code><a class="headerlink" href="#esp-at-wifi-mode" title="Permalink to this heading">¶</a></h4>
<p>( auto-connect-mode wifi-mode self – )</p>
<p>Set the WiFi mode.</p>
</section>
<section id="esp-at-ap-ipv4-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ap-ipv4-addr&#64;</span></code><a class="headerlink" href="#esp-at-ap-ipv4-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local softAP IPv4 address.</p>
</section>
<section id="esp-at-ap-ipv6-ll-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ap-ipv6-ll-addr&#64;</span></code><a class="headerlink" href="#esp-at-ap-ipv6-ll-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local softAP link-local IPv6 address.</p>
</section>
<section id="esp-at-ap-ipv6-gl-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ap-ipv6-gl-addr&#64;</span></code><a class="headerlink" href="#esp-at-ap-ipv6-gl-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local softAP global IPv6 address.</p>
</section>
<section id="esp-at-ap-mac-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-ap-mac-addr&#64;</span></code><a class="headerlink" href="#esp-at-ap-mac-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local softAP MAC address.</p>
</section>
<section id="esp-at-station-ipv4-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-station-ipv4-addr&#64;</span></code><a class="headerlink" href="#esp-at-station-ipv4-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local station IPv4 address.</p>
</section>
<section id="esp-at-station-ipv6-ll-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-station-ipv6-ll-addr&#64;</span></code><a class="headerlink" href="#esp-at-station-ipv6-ll-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local station link-local IPv6 address.</p>
</section>
<section id="esp-at-station-ipv6-gl-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-station-ipv6-gl-addr&#64;</span></code><a class="headerlink" href="#esp-at-station-ipv6-gl-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local station global IPv6 address.</p>
</section>
<section id="esp-at-station-mac-addr">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-station-mac-addr&#64;</span></code><a class="headerlink" href="#esp-at-station-mac-addr" title="Permalink to this heading">¶</a></h4>
<p>( self – c-addr bytes found? )</p>
<p>Get the local station MAC address.</p>
</section>
<section id="test-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">test-esp-at</span></code><a class="headerlink" href="#test-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Test an ESP-AT device. If the ESP-AT device does not respond <code class="docutils literal notranslate"><span class="pre">x-esp-at-not-ready</span></code> will be raised.</p>
</section>
<section id="esp-at-echo">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-echo!</span></code><a class="headerlink" href="#esp-at-echo" title="Permalink to this heading">¶</a></h4>
<p>( echo? self – )</p>
<p>Set ESP-AT command echoing. This is relevant when logging to the serial console is enabled.</p>
</section>
<section id="init-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">init-esp-at</span></code><a class="headerlink" href="#init-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( mode self – )</p>
<p>Initialize an ESP-AT device. This must be executed before using an ESP-AT device. This also disconnects any prior connections, puts the ESP-AT device in single connection mode, and sets the WiFi mode to <em>mode</em>.</p>
</section>
<section id="reset-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">reset-esp-at</span></code><a class="headerlink" href="#reset-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Reset an ESP-AT device.</p>
</section>
<section id="poll-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">poll-esp-at</span></code><a class="headerlink" href="#poll-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Poll an ESP-AT device for received data. Any received data is passed to the xt that was specified with <code class="docutils literal notranslate"><span class="pre">esp-at-recv-xt!</span></code>.</p>
</section>
<section id="connect-esp-at-wifi">
<h4><code class="docutils literal notranslate"><span class="pre">connect-esp-at-wifi</span></code><a class="headerlink" href="#connect-esp-at-wifi" title="Permalink to this heading">¶</a></h4>
<p>( D: password D: ssid self – )</p>
<p>Connect to a WiFi AP.</p>
</section>
<section id="disconnect-esp-at-wifi">
<h4><code class="docutils literal notranslate"><span class="pre">disconnect-esp-at-wifi</span></code><a class="headerlink" href="#disconnect-esp-at-wifi" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Disconnect from a WiFi AP.</p>
</section>
<section id="resolve-esp-at-ip">
<h4><code class="docutils literal notranslate"><span class="pre">resolve-esp-at-ip</span></code><a class="headerlink" href="#resolve-esp-at-ip" title="Permalink to this heading">¶</a></h4>
<p>( prefer D: domain – c-addr bytes found )</p>
<p>Resolve a domain name.</p>
</section>
<section id="start-esp-at-single">
<h4><code class="docutils literal notranslate"><span class="pre">start-esp-at-single</span></code><a class="headerlink" href="#start-esp-at-single" title="Permalink to this heading">¶</a></h4>
<p>( keep-alive type remote-port D: remote-host self – )</p>
<p>Start a single ESP-AT TCP connection.</p>
<p><em>remote-host</em> may be an IPv4 or IPv6 address or a hostname.</p>
<p><em>keep-alive</em> is 0 for no TCP keep alive functionality, 1-7200 for detection interval in seconds.</p>
</section>
<section id="start-esp-at-multi">
<h4><code class="docutils literal notranslate"><span class="pre">start-esp-at-multi</span></code><a class="headerlink" href="#start-esp-at-multi" title="Permalink to this heading">¶</a></h4>
<p>( keep-alive type remote-port D: remote-host mux self – )</p>
<p>Start a multiple ESP-AT TCP connection.</p>
<p><em>mux</em> is an ID from 0 to 4 to assign to the TCP connection.</p>
<p><em>remote-host</em> may be an IPv4 or IPv6 address or a hostname.</p>
<p><em>keep-alive</em> is 0 for no TCP keep alive functionality, 1-7200 for detection interval in seconds.</p>
</section>
<section id="start-esp-at-server">
<h4><code class="docutils literal notranslate"><span class="pre">start-esp-at-server</span></code><a class="headerlink" href="#start-esp-at-server" title="Permalink to this heading">¶</a></h4>
<p>( port self – )</p>
<p>Start a TCP server.</p>
<p>Note that prior to executing this multiple connection mode must be enabled with <code class="docutils literal notranslate"><span class="pre">esp-at-multi!</span></code>.</p>
</section>
<section id="delete-esp-at-server">
<h4><code class="docutils literal notranslate"><span class="pre">delete-esp-at-server</span></code><a class="headerlink" href="#delete-esp-at-server" title="Permalink to this heading">¶</a></h4>
<p>( close-all self – )</p>
<p>Delete a TCP server.</p>
</section>
<section id="single-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">single&gt;esp-at</span></code><a class="headerlink" href="#single-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( c-addr bytes self – )</p>
<p>Send data for a single TCP connection to an ESP-AT device.</p>
</section>
<section id="multi-esp-at">
<h4><code class="docutils literal notranslate"><span class="pre">multi&gt;esp-at</span></code><a class="headerlink" href="#multi-esp-at" title="Permalink to this heading">¶</a></h4>
<p>( c-addr bytes mux self – )</p>
<p><em>mux</em> is the ID from 0 to 4 of the TCP connection.</p>
<p>Send data for a multiple TCP connection to an ESP-AT device.</p>
</section>
<section id="close-esp-at-single">
<h4><code class="docutils literal notranslate"><span class="pre">close-esp-at-single</span></code><a class="headerlink" href="#close-esp-at-single" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Close a single TCP connection on an ESP-AT device. Note that with some ESP8285 firmware this may cause a crash.</p>
</section>
<section id="close-esp-at-multi">
<h4><code class="docutils literal notranslate"><span class="pre">close-esp-at-multi</span></code><a class="headerlink" href="#close-esp-at-multi" title="Permalink to this heading">¶</a></h4>
<p>( mux self – )</p>
<p>Close a multiple TCP connection on an ESP-AT device. Note that with some ESP8285 firmware this may cause a crash.</p>
<p><em>mux</em> is the ID from 0 to 4 of the TCP connection.</p>
</section>
</section>
<section id="id9">
<h3><code class="docutils literal notranslate"><span class="pre">&lt;esp-at-status&gt;</span></code><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;esp-at-status&gt;</span></code> class encapsulates the ESP-AT device status as reported by <code class="docutils literal notranslate"><span class="pre">esp-at-status&#64;</span></code>.</p>
<section id="esp-at-status-station">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-station!</span></code><a class="headerlink" href="#esp-at-status-station" title="Permalink to this heading">¶</a></h4>
<p>( station self – )</p>
<p>Set the station status.</p>
</section>
<section id="id10">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-station&#64;</span></code><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<p>( self – station )</p>
<p>Get the station status.</p>
</section>
<section id="esp-at-status-count">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-count!</span></code><a class="headerlink" href="#esp-at-status-count" title="Permalink to this heading">¶</a></h4>
<p>( count self – )</p>
<p>Set the entry count.</p>
</section>
<section id="id11">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-count&#64;</span></code><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<p>( self – count )</p>
<p>Get the entry count.</p>
</section>
<section id="esp-at-status-mux">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-mux!</span></code><a class="headerlink" href="#esp-at-status-mux" title="Permalink to this heading">¶</a></h4>
<p>( mux index self – )</p>
<p>Set the entry link ID.</p>
</section>
<section id="id12">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-mux&#64;</span></code><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<p>( index self – mux )</p>
<p>Get the entry link ID.</p>
</section>
<section id="esp-at-status-type">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-type!</span></code><a class="headerlink" href="#esp-at-status-type" title="Permalink to this heading">¶</a></h4>
<p>( type index self – )</p>
<p>Set the entry link type.</p>
</section>
<section id="id13">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-type&#64;</span></code><a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
<p>( index self – type )</p>
<p>Get the entry link type.</p>
</section>
<section id="esp-at-status-tetype">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-tetype!</span></code><a class="headerlink" href="#esp-at-status-tetype" title="Permalink to this heading">¶</a></h4>
<p>( tetype index self – )</p>
<p>Set the entry link server/client type.</p>
</section>
<section id="id14">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-tetype&#64;</span></code><a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h4>
<p>( index self – tetype )</p>
<p>Get the entry link server/client type.</p>
</section>
<section id="esp-at-status-remote-ip">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-remote-ip!</span></code><a class="headerlink" href="#esp-at-status-remote-ip" title="Permalink to this heading">¶</a></h4>
<p>( ip-addr ip-len index self – )</p>
<p>Set the entry link remote IP.</p>
</section>
<section id="id15">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-remote-ip&#64;</span></code><a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h4>
<p>( index self – ip-addr ip-len )</p>
<p>Get the entry link remove IP.</p>
</section>
<section id="esp-at-status-remote-port">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-remote-port!</span></code><a class="headerlink" href="#esp-at-status-remote-port" title="Permalink to this heading">¶</a></h4>
<p>( port index self – )</p>
<p>Set the entry link remote port.</p>
</section>
<section id="id16">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-remote-port&#64;</span></code><a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h4>
<p>( index self – port )</p>
<p>Get the entry link remote port.</p>
</section>
<section id="esp-at-status-local-port">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-local-port!</span></code><a class="headerlink" href="#esp-at-status-local-port" title="Permalink to this heading">¶</a></h4>
<p>( port index self – )</p>
<p>Set the entry link local port.</p>
</section>
<section id="id17">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status-local-port&#64;</span></code><a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<p>( index self – port )</p>
<p>Get the entry link local port.</p>
</section>
<section id="id18">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-status.</span></code><a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h4>
<p>( self – )</p>
<p>Print link status.</p>
</section>
</section>
</section>
<section id="wio-esp-at">
<h2><code class="docutils literal notranslate"><span class="pre">wio-esp-at</span></code><a class="headerlink" href="#wio-esp-at" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">wio-esp-at</span></code> module defined in <code class="docutils literal notranslate"><span class="pre">extra/rp2040/wio_esp_at.fs</span></code> defines the hardware configuration necessary to interface with the ESP8285 WiFi radio on the Wio RP2040 board.</p>
<section id="wio-esp-at-spi">
<h3><code class="docutils literal notranslate"><span class="pre">&lt;wio-esp-at-spi&gt;</span></code><a class="headerlink" href="#wio-esp-at-spi" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;wio-esp-at-spi&gt;</span></code> class provides an interface to the ESP8285 on the Wio RP2040 over SPI peripheral 1. It exposes the following API:</p>
<section id="esp-at-log">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-log!</span></code><a class="headerlink" href="#esp-at-log" title="Permalink to this heading">¶</a></h4>
<p>( log? self – )</p>
<p>This sets whether logging is enabled for communications over SPI. Note that logging always goes to the serial console, even if the console has been redirected.</p>
</section>
<section id="id19">
<h4><code class="docutils literal notranslate"><span class="pre">esp-at-log?</span></code><a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h4>
<p>( self – log? )</p>
<p>This gets whether logging is enabled for communications over SPI.</p>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">zeptoforth</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../words/basic.html">Basic Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/module.html">Module Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/lambda.html">Lambda Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/wordlist.html">Wordlist Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/task.html">Multitasking Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/action.html">Action Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/pin.html">Pin Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/led.html">LED Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/gpio.html">GPIO Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/exti.html">EXTI Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/pio.html">Programmable Input/Output Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/uart.html">UART Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/adc.html">Analog-Digital Converter Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/spi.html">SPI Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/i2c.html">I2C Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/pwm.html">Pulse Width Modulation Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/rtc.html">Realtime Clock (RTC) Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/timer.html">Hardware Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/sdcard.html">SDHC/SDXC Card Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/fat32.html">FAT32 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/simple_fat32.html">Simple FAT32 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/fat32_tools.html">FAT32 Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/interrupt.html">Interrupt Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/multicore.html">Multicore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/dev_tools.html">Development Tools Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/armv6m.html">ARMv6-M Assembler Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/line.html">Line Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/double.html">Double-Cell Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/value.html">Value and Local Variable Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/closure.html">Closures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/temp.html">Temporary Buffer Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/task_pool.html">Task Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/action_pool.html">Action Pool words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/heap.html">Heap Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/pool.html">Pool Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/map.html">Map Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/oo.html">Object Orientation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/lock.html">Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/slock.html">Simple Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/core_lock.html">Core Lock Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/channel.html">Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/fchannel.html">Rendezvous Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/schannel.html">Simple channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/rchannel.html">Bidirectional Channel Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/semaphore.html">Semaphore Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/stream.html">Stream Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/tqueue.html">Task Queue Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/systick.html">SysTick Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/rng.html">Random Number Generator Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/ansi_term.html">ANSI Terminal words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/qspi.html">Quad SPI words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/block.html">Block words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/edit.html">Block Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/swd.html"><code class="docutils literal notranslate"><span class="pre">swdcom</span></code> Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/test.html">Testing Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/internal.html">Internal Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/asm.html">Compilation-specific words</a></li>
<li class="toctree-l1"><a class="reference internal" href="../words/expose.html">Exposed Kernel Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="display.html">Bitmaps and Displays</a></li>
<li class="toctree-l1"><a class="reference internal" href="font.html">Fonts</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitmap_utils.html">Bitmap Utiliteis</a></li>
<li class="toctree-l1"><a class="reference internal" href="neopixel.html">Neopixels on the RP2040</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ESP-AT and Wio RP2040 ESP-AT Words</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="neopixel.html" title="previous chapter">Neopixels on the RP2040</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Travis Bemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/extra/esp_at.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>